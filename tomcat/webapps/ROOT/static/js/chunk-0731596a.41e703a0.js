(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0731596a"],{"277f":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{margin:"30px"}},[o("el-row",{attrs:{gutter:15}},[o("el-form",{ref:"elForm",attrs:{model:t.form,rules:t.rules,size:"medium","label-width":"100px"}},[o("el-col",{attrs:{span:22}},[o("el-form-item",{attrs:{label:"标题",prop:"title"}},[o("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入标题",clearable:""},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),o("el-col",{attrs:{span:22}},[o("el-form-item",{attrs:{label:"简介",prop:"summary"}},[o("el-input",{style:{width:"100%"},attrs:{type:"textarea",placeholder:"请输入简介",autosize:{minRows:4,maxRows:4}},model:{value:t.form.summary,callback:function(e){t.$set(t.form,"summary",e)},expression:"form.summary"}})],1)],1),o("el-col",{attrs:{span:22}},[o("el-form-item",{attrs:{label:"上传封面",prop:"cover"}},[o("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.coverBeforeUpload}},[t.form.cover?o("img",{staticClass:"avatar",attrs:{src:t.form.cover}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),o("el-col",{attrs:{span:7}},[o("el-form-item",{attrs:{label:"标签",prop:"tags"}},[o("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择标签",clearable:"",multiple:""},model:{value:t.tags,callback:function(e){t.tags=e},expression:"tags"}},t._l(t.tagsOptions,(function(t,e){return o("el-option",{key:e,attrs:{label:t.tag,value:Number(t.id),disabled:t.disabled}})})),1)],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"博客类型",prop:"blogType"}},[o("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择博客类型",clearable:""},model:{value:t.form.blogType,callback:function(e){t.$set(t.form,"blogType",e)},expression:"form.blogType"}},t._l(t.blogTypeOptions,(function(t,e){return o("el-option",{key:e,attrs:{label:t.dictLabel,value:t.dictValue,disabled:t.disabled}})})),1)],1)],1),o("el-col",{attrs:{span:7}},[o("el-form-item",{attrs:{label:"内容类型",prop:"contentType"}},[o("el-select",{style:{width:"100%"},attrs:{placeholder:"请选择内容类型",clearable:""},model:{value:t.form.contentType,callback:function(e){t.$set(t.form,"contentType",e)},expression:"form.contentType"}},t._l(t.contentTypeOptions,(function(t,e){return o("el-option",{key:e,attrs:{label:t.dictLabel,value:Number(t.dictValue),disabled:t.disabled}})})),1)],1)],1),o("el-col",{attrs:{span:22}},[o("el-form-item",{attrs:{label:"博文内容",prop:"content"}},[1==t.form.contentType?o("Markdown",{attrs:{content:t.form.content,"min-height":"400px"},on:{"update:content":function(e){return t.$set(t.form,"content",e)}}}):t._e(),2==t.form.contentType||""==t.form.contentType||void 0==t.form.contentType?o("Editor",{attrs:{classs:"avatar-uploader",minHeight:150},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}}):t._e()],1)],1)],1)],1),o("el-row",[o("el-col",{attrs:{span:24,pull:2}},[o("div",{staticStyle:{float:"right"}},[o("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("提交")]),o("el-button",{on:{click:t.resetForm}},[t._v("重置")])],1)])],1)],1)},r=[],a=(o("d3b7"),o("159b"),o("ac1f"),o("1276"),o("a9e3"),o("25f0"),o("682b")),l=(o("095c"),o("5f87")),c=o("a6409"),s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-md-editor",{style:{minHeight:t.minHeight},on:{change:t.changeContent,"upload-image":t.handleUploadImage},model:{value:t.blogContent,callback:function(e){t.blogContent=e},expression:"blogContent"}})},i=[],u={name:"Markdown",props:{content:{type:String,default:""},height:{type:String,default:null},minHeight:{type:String,default:null}},data:function(){return{}},created:function(){},computed:{blogContent:{get:function(){return this.content},set:function(t){this.$emit("update:content",t)}}},watch:{},mounted:function(){},methods:{handleUploadImage:function(){},changeContent:function(){}}},d=u,p=o("2877"),m=Object(p["a"])(d,s,i,!1,null,"995963ce",null),f=m.exports,g={components:{Markdown:f},props:[],data:function(){return{blogId:"",uploadUrl:"/prod-api/common/upload",headers:{Authorization:"Bearer "+Object(l["a"])()},form:{title:"",summary:void 0,cover:null,tags:[],tagId:void 0,blogType:void 0,contentType:2,content:void 0},rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],blogType:[{required:!0,message:"请选择博客类型",trigger:"change"}],contentType:[{required:!0,message:"请选择内容类型",trigger:"change"}],content:[{required:!0,message:"请输入博文内容",trigger:["blur","change"]}]},tagsOptions:[],tags:[],blogTypeOptions:[],contentTypeOptions:[]}},watch:{},created:function(){var t=this;this.getDicts("content_type").then((function(e){t.contentTypeOptions=e.data})),this.getDicts("blog_type").then((function(e){t.blogTypeOptions=e.data})),Object(a["e"])().then((function(e){t.tagsOptions=e.rows})),this.blogId=this.$route.query.id,void 0!=this.blogId&&""!=this.blogId&&Object(c["d"])(this.blogId).then((function(e){t.form=e.data,t.tags=[],t.form.tagId.split(",").forEach((function(e){t.tags.push(Number(e))})),console.log(t.tags)}))},mounted:function(){},methods:{submitForm:function(){var t=this;this.$refs["elForm"].validate((function(e){e&&(t.form.tagId=t.tags.toString(),void 0!=t.blogId&&""!=t.blogId?(t.form.id=t.blogId,Object(c["f"])(t.form).then((function(e){t.msgSuccess("修改成功"),t.$router.push({path:"/blog"})}))):Object(c["a"])(t.form).then((function(e){t.msgSuccess("新增成功"),t.$router.push({path:"/blog"})})))}))},resetForm:function(){this.$refs["elForm"].resetFields()},coverBeforeUpload:function(t){var e=t.size/1024/1024<4;return e||this.$message.error("文件大小超过 4MB"),e},handleAvatarSuccess:function(t){200==t.code&&(this.form.cover=t.url)},handleUploadImage:function(t,e,o){console.log(o)}}},b=g,h=(o("27c4"),Object(p["a"])(b,n,r,!1,null,null,null));e["default"]=h.exports},"27c4":function(t,e,o){"use strict";o("e4a1")},"682b":function(t,e,o){"use strict";o.d(e,"e",(function(){return r})),o.d(e,"d",(function(){return a})),o.d(e,"a",(function(){return l})),o.d(e,"f",(function(){return c})),o.d(e,"b",(function(){return s})),o.d(e,"c",(function(){return i}));var n=o("b775");function r(t){return Object(n["a"])({url:"/tTag/tag/list",method:"get",params:t})}function a(t){return Object(n["a"])({url:"/tTag/tag/"+t,method:"get"})}function l(t){return Object(n["a"])({url:"/tTag/tag",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/tTag/tag",method:"put",data:t})}function s(t){return Object(n["a"])({url:"/tTag/tag/"+t,method:"delete"})}function i(t){return Object(n["a"])({url:"/tTag/tag/export",method:"get",params:t})}},a6409:function(t,e,o){"use strict";o.d(e,"e",(function(){return r})),o.d(e,"d",(function(){return a})),o.d(e,"a",(function(){return l})),o.d(e,"f",(function(){return c})),o.d(e,"b",(function(){return s})),o.d(e,"c",(function(){return i}));var n=o("b775");function r(t){return Object(n["a"])({url:"/tBlog/blog/list",method:"get",params:t})}function a(t){return Object(n["a"])({url:"/tBlog/blog/"+t,method:"get"})}function l(t){return Object(n["a"])({url:"/tBlog/blog",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/tBlog/blog",method:"put",data:t})}function s(t){return Object(n["a"])({url:"/tBlog/blog/"+t,method:"delete"})}function i(t){return Object(n["a"])({url:"/tBlog/blog/export",method:"get",params:t})}},e4a1:function(t,e,o){}}]);